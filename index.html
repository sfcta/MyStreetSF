<!DOCTYPE html>
<html lang='en'>
  <head>
    <title>SFCTA Interactive Map</title>
    <meta charset='utf-8' />
    <meta content='width=device-width, initial-scale=1.0' name='viewport' />
    <meta content='' name='description' />
    <meta content='' name='author' />
    <script type="text/javascript" src="source/jquery.js"></script>
    <script type="text/javascript" src="source/bootstrap.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>    
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <script type="text/javascript" src="source/maps_lib.js"></script>
        
    <script>
    function OnLoadCallback() {
      console.log("OnLoadCallback");
      MapsLib.initialize();
	    $("#slider").slider({value:100, slide:MapsLib.slide, change:MapsLib.slideChange });
		}
  	</script>
		<!-- this is for making Fusion Tables API calls directly -->
		<script src="https://apis.google.com/js/client.js?onload=OnLoadCallback"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/bootstrap.css"/>
    <link rel="stylesheet" href="styles/bootstrap-responsive.css"/>
    <link rel="stylesheet" href="styles/custom.css"/>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script type="text/javascript" src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class='container-fluid'>
      <div class='page-header'>
        <h1>
          <a href='#'>SFCTA Interactive Map</a> 
          <small>Active Projects</small>
        </h1>
      </div>
      <div class='row-fluid'>
        <div class='span3'>
          <div class='well'>
          
					<table id='filters'>
					<tr><th>District</th>
					<td id="widget-district">
					<select id='district'>
						<option>All</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
						<option>6</option>
						<option>7</option>
						<option>8</option>
						<option>9</option>
						<option>10</option>
						<option>11</option>
					</select>
					</td></tr>
					
					<tr><th>Funding Source</th>
					<td id="widget-fundsrc">
					<input type="checkbox" id='FSPropK' /> Prop K<br />
					<input type="checkbox" id='FSTFCA' /> TFCA<br />
					<input type="checkbox" id='FSRegStFed' /> Regional, State or Federal
					</td></tr>
															
					<tr><th>Project Type</th>
					<td id="widget-project-type">
					<select id='project-type'>
						<option>All</option>
						<option>Bike</option>
						<option>Pedestrian Safety</option>
						<option>Plans and Studies</option>
						<option>Signs and Signals</option>
						<option>Street Repair</option>
						<option>Transit Enhancements</option>
						<option>Transit Rehab</option>
					</select>
					</td></tr>

					<tr><th>Project Sponsor</th>
					<td id="widget-project-sponsor">
					<select id='project-sponsor'>
						<option>All</option>
						<option>BART</option>
						<option>DPW</option>
						<option>PCJPB</option>
						<option>Port of SF</option>
						<option>SFCTA</option>
						<option>SFMTA</option>
					</select>
					</td></tr>
					
					<tr><th>Within</th>
					<td id="widget-within">
					<select id='ddlRadius'>
						<option value='400'>2 blocks</option>
						<option value='805'>1/2 mile</option>
						<option value='1610'>1 mile</option>
						<option value='3220'>2 miles</option>
					</select>
					
					<span>of</span>
					<div class='input-addr' style="display:inline">
					<input class='input-block-level' type="text" placeholder='Enter an address or an intersection' id="txtSearchAddress" />(<a href='#' id="findMe">find me</a>)
					</div>
					</td></tr>
					
					<tr><th>Expected Completion Date</th>
					<td><span>before</span> <span id="slide-date"></span><div id="slider"></div>
					<span style="float:left; font-size:9pt;" id="slide-min-date"></span><span style="float:right; font-size:9pt;" id="slide-max-date"></span>
					</td></tr>
					</table>

            
            <hr />
            <!-- hide the giant search button - it doesn't do anything
            <input class='btn btn-primary btn-large' id='btnSearch' type='button' value='Search' /> -->
            
            <button class='btn' id='reset'>Reset</button>
          </div>
          <p class='alert alert-info lead' id='resultCount'></p>
          <div id="citywide">
					<h3>Citywide Projects and Plans</h3>
          Some SFCTA sponsored projects and plans are not shown on this map.  For example, we also work in conjunction with organizations such
          as Caltrain and fund various Citywide Programs, Bay Area Regional Plans, and the comprehensive Countywide Transportation Plan.
          These types projects are difficult to visualize on a map, but can still be accessed on this page below.
          <ul id="citywide-list">
          </ul>
          </div><!-- /citywide -->
        </div>
        <div class='span9'>
          <div id='mapCanvas'></div>
          <!-- p class='pull-right'>
            Map and <a href='http://derekeder.com/searchable_map_template/'>search template</a> by <a href='http://derekeder.com'>Derek Eder</a>.
        </p -->
        </div>
      </div><!--/row-->  

      <div class="row-fluid">
        <div class="span3" id="contact"><br />
        <strong>Contact Info</strong><br />
        If you have any questions or comments regarding the SFCTA interactive map, please contact <a href="mailto:anthony.adams@sfcta.org">Anthony Adams</a>
        at the San Francisco County Transportation Authority.    
        </div>
        <div class="span9" id="disclaimer"><br />
        <strong>Disclaimer</strong>  Please Note: This map is not designed to show all transportation projects within the County, only projects
        funded through the San Francisco County Transportation Authority are represented.  If you wish to search for other transportation or
        development projects within San Francisco you can also visit these other government agencies:
        <a target="_blank" href="http://www.sfmta.com/cms/home/sfmta.php">San Francisco Municipal Transportation Agency</a>,
        <a target="_blank" href="https://maps.google.com/maps/ms?msid=205892305473316085509.00047bd126d0d68149490&msa=0&ll=37.773157,-122.457561&spn=0.092675,0.2108">SF Dept. of Public Works</a>, 
        <a target="_blank" href="http://www.sf-planning.org/index.aspx?page=2426">City of SF Planning Dept.</a>,
        <a target="_blank" href="http://www.caltrain.com/projectsplans.html">Caltrain</a>.  
        </div>
      </div><!--/row-->  
    </div><!--/.fluid-container-->
    
    <script type="text/javascript" src="source/jquery.address.min.js"></script>
    <script type='text/javascript'>		        
      //<![CDATA[
  			$(document).ready(function() {
	    		// $("#slider").slider({value:100, slide:MapsLib.slide, change:MapsLib.slideChange });
  			});
        
        $(window).resize(function () {
          var h = $(window).height(),
            offsetTop = 200; // Calculate the top offset
        
          $('#mapCanvas').css('height', (h - offsetTop));
        }).resize();
        
        $(function() {
          // MapsLib.initialize();
          
          $(':input').click(function(){
            MapsLib.doSearch();
          });
          
          $('#ddlRadius').change(function(){
            MapsLib.doSearch();
          });
          
          $('#btnSearch').click(function(){
            MapsLib.doSearch();
          });          
          
          $('#findMe').click(function(){
            MapsLib.findMe(); 
            return false;
          });
          
          $('#reset').click(function(){
            $.address.parameter('address','');
            MapsLib.initialize(); 
            return false;
          });
          
          $("#txtSearchAddress").keydown(function(e){
              var key =  e.keyCode ? e.keyCode : e.which;
              if(key == 13) {
                  $('#btnSearch').click();
                  return false;
              }
          });
        });
      //]]>
    </script>

  </body>
</html>