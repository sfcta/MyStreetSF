<!DOCTYPE html>
<html lang='en'>
  <head>
    <title>SFCTA Interactive Map</title>
    <meta charset='utf-8' />
    <meta content='width=device-width, initial-scale=1.0' name='viewport' />
    <meta content='' name='description' />
    <meta content='' name='author' />
    <script>
    var called_onloadcallback = false;
    var called_document_ready = false;
    </script>
    
    <script type="text/javascript" src="source/jquery.js"></script>
    <script type="text/javascript" src="source/bootstrap.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>    
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <script type="text/javascript" src="source/infobox_packed.js"></script>
    <script type="text/javascript" src="source/maps_lib.js"></script>
    
    <!-- for colorbox demo -->
    <link rel="stylesheet" href="styles/colorbox.css" type="text/css"/>
    <script type="text/javascript" src="source/jquery.colorbox.js"></script>
        
    <script>
    function OnLoadCallback() {
      console.log("OnLoadCallback");
      called_onloadcallback = true;
      
      if (called_document_ready && called_onloadcallback) {
	      MapsLib.initialize();
		    $("#slider").slider({value:100, slide:MapsLib.slide, change:MapsLib.slideChange });
		  }
		}
  	</script>
		<!-- this is for making Fusion Tables API calls directly -->
		<script src="https://apis.google.com/js/client.js?onload=OnLoadCallback"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/bootstrap.css"/>
    <link rel="stylesheet" href="styles/bootstrap-responsive.css"/>
    <link rel="stylesheet" href="styles/custom.css"/>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script type="text/javascript" src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  
  <!-- google analytics -->  
  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34878653-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script>    
  </head>
  <body>
    <div class='container-fluid'>
      <div class='row-fluid'>
        <div class='span12' align="center">
          <h1 class='contentheading'>Active SFCTA Projects | Interactive Map</h1>
        </div>
      </div>
    
      <div class='row-fluid'>
        <div class='span6'>
          <p>The purpose of this map is to supply the public with location and project information about all active projects funded through 
          the San Francisco County Transportation Authority (SFCTA).  In our role as the 
          <a href="http://www.sfcta.org/content/view/301/147" target="_blank">Congestion Management Agency (CMA)</a> for San Francisco as well as 
          administrators of <a href="http://www.sfcta.org/content/view/347/198" target="_blank">Prop K</a>, 
          <a href="http://www.sfcta.org/content/view/1114/528/" target="_blank">Prop AA</a>, and 
          <a href="http://www.sfcta.org/content/section/3/8/" target="_blank">other regional, state, and federal funding sources</a>, 
          we feel that transparency is important and that the public should have easy access to information about transportation projects
          happening in the city.</p>
          
          <p>This map offers you the ability
          to search for information on active transportation projects funded through the SFCTA in your neighborhood or district. 
          Each project has a special project page which shows more detailed project information and how to contact the project sponsor with
          questions or concerns.  Thank you for your interest in the progress of our transportation network!  <a href="#contact">We would love
          to hear what you think!</a>
          </p>
          <h3>Location-specific Projects and Plans</h3>
          <p>Filter the projects shwon in the map below using the widgets to the right.
          </p>
          <h3>Citywide Projects and Plans</h3>
          <p>Citywide Projects and Plans (having no specific location associated with them) are viewable in the list below the map.
          </p> 
        </div>
        <div class='span6'>
    
          <table><tr>
          <td>
          <label for='district'>District</label>
          <select id='district' name='district'>
            <option>All</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            <option>6</option>
            <option>7</option>
            <option>8</option>
            <option>9</option>
            <option>10</option>
            <option>11</option>
          </select>
          </td>
          
          <td style="padding-left:20px"><label for='fundsrc'>Funding Source</label></td>
          <td>
            <input type="checkbox" id='FSPropK' /> Prop K<br />
            <input type="checkbox" id='FSTFCA' /> TFCA<br />
            <input type="checkbox" id='FSRegStFed' /> Regional, State or Federal          
          </td>
          </tr></table>

          <div style="clear:both"></div>
          <hr />
          
          <table style="width:100%">                              
          <tr>
          
          <td>
          <label for='project-type'>Project Type</label><br />
          <select id='project-type'>
            <option>All</option>
            <option>Bike</option>
            <option>Major Capital Projects</option>
            <option>Pedestrian Safety</option>
            <option>Plans and Studies</option>
            <option>Signs and Signals</option>
            <option>Street Repair</option>
            <option>Transit Enhancements</option>
            <option>Transit Rehab</option>
          </select>
          </td>

          <td>
          <label for='ddlRadius'>Within</label><br />
          <select id='ddlRadius'>
            <option value='400'>2 blocks</option>
            <option value='805'>1/2 mile</option>
            <option value='1610'>1 mile</option>
            <option value='3220'>2 miles</option>
          </select>
          </td>
          </tr>
          
          <tr>
          <td>
          <label for='project-sponsor'>Project Sponsor</label><br />
          <select id='project-sponsor'>
            <option>All</option>
            <option>BART</option>
            <option>DPW</option>
            <option>PCJPB</option>
            <option>Port of SF</option>
            <option>SFCTA</option>
            <option>SFMTA</option>
          </select>
          </td>
          
          <td>
          <div class='input-addr'>
          of (<a href='#' id="findMe">find me</a>)<input class='input-block-level' type="text" placeholder='Enter an address or an intersection' id="txtSearchAddress" />
          </div>
          </td>
          
          </tr>
          
          <tr>
          <td>
          <label for='slide-date'>Project Completion Expected<label><br />
          <span>before</span> <span id="slide-date"></span><div id="slider"></div>
          <span style="float:left; font-size:9pt;" id="slide-min-date"></span><span style="float:right; font-size:9pt;" id="slide-max-date"></span>
          </td>
          
          <td>
          <div class='results' style='text-align:center'>
            <div class='alert alert-info lead' id='resultCount'>results found</div>
            <div style="clear:both"></div>
            <div><button class='btn' id='reset'>Reset</button></div>
            <div style="clear:both"></div>
          </div>
          </td>
          </tr>
          </table>

          <div><a id="download" href="#" target="_blank">Download this data as a CSV</a>  Right-click the link and choose "Save Link As..." to save the document to your computer. 
                Name the file with a ".csv" suffix (e.g. "sfcta_projects.csv"), to make it easier to open.
          </div>
      
        </div>
        
      </div>
      
      <div class='row-fluid'>
        <div class='span12' style="position:relative">
          <div id='mapCanvas' style="height:650px"></div>
          <div id='wait'>Finding location<br /><img src="styles/ajax-loader.gif"></div>
          <div id='maplogo'><img src="styles/sfcta_logo_4c_emulation_150px.png"></div>  
        </div>
      </div><!--/row-->  

      <div class="row-fluid">
        <div class='span3'>

          <h3>Citywide Projects and Plans</h3>
          Some SFCTA sponsored projects and plans are not shown on this map.  For example, we also work in conjunction with organizations such
          as Caltrain and fund various Citywide Programs, Bay Area Regional Plans, and the comprehensive Countywide Transportation Plan.
          These types projects are difficult to visualize on a map, but can still be accessed on this page below.
      
        </div>
        <div class='span3'>
          <ul id="citywide-types"></ul>
        </div>
        
        <div class='span6'><ul id="citywide-list"></ul></div>
        
        
      </div><!--/row-->  

      <div class="row-fluid">
        <div class="span12" id="contact"><br />
        <a name="#contact"></a><h4>Contact Info</h4>
        <p>If you have any questions or comments regarding the SFCTA interactive map, please contact <a href="mailto:anthony.adams@sfcta.org">Anthony Adams</a>
        at the San Francisco County Transportation Authority.</p>

        <p><strong>Disclaimer</strong>  This map is not designed to show all transportation projects within the County, only projects
        funded through the San Francisco County Transportation Authority are represented.  If you wish to search for other transportation or
        development projects within San Francisco you can also visit these other government agencies:
        <a target="_blank" href="http://www.sfmta.com/cms/home/sfmta.php">San Francisco Municipal Transportation Agency</a>,
        <a target="_blank" href="https://maps.google.com/maps/ms?msid=205892305473316085509.00047bd126d0d68149490&msa=0&ll=37.773157,-122.457561&spn=0.092675,0.2108">SF Dept. of Public Works</a>, 
        <a target="_blank" href="http://www.sf-planning.org/index.aspx?page=2426">City of SF Planning Dept.</a>,
        <a target="_blank" href="http://www.caltrain.com/projectsplans.html">Caltrain</a>.
        </p>
        </div><!--/span12-->
      </div><!--/row-->  
    </div><!--/.fluid-container-->
    
    <script type="text/javascript" src="source/jquery.address.min.js"></script>
    <script type='text/javascript'>		        
      //<![CDATA[
  			$(document).ready(function() {
					console.log("document ready");   	
      		called_document_ready = true;
      		
      		if (called_document_ready && called_onloadcallback) {
	      		MapsLib.initialize();
		    		$("#slider").slider({value:100, slide:MapsLib.slide, change:MapsLib.slideChange });
		  		}      		
      		
  			});
        
        $(function() {
          // MapsLib.initialize();
          // call this on all but the txt search address -- for that, the enter is required          
          $(':input:not(#txtSearchAddress)').change(function(){
            MapsLib.doSearch();
          });    
          
          $('#findMe').click(function(){
            MapsLib.findMe(); 
            return false;
          });
          
          $('#reset').click(function(){
            $.address.parameter('address','');
            MapsLib.initialize();
            MapsLib.redisplayLegend();
            return false;
          });
          
          $("#txtSearchAddress").keyup(function(e){
              var key =  e.keyCode ? e.keyCode : e.which;
              if(key == 13) {
                  MapsLib.doSearch();
                  return false;
              }
          });
        });
      //]]>
    </script>

  </body>
</html>